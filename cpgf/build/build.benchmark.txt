set(TARGET_BENCHMARK benchmark)

set(OUTNAME_BENCHMARK benchmark)

set(BENCHMARK_ROOT ${ROOT_PATH}/benchmark)

if(MSVC)
	set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} -GL")
	set(CMAKE_EXE_LINKER_FLAGS_RELEASE "${CMAKE_EXE_LINKER_FLAGS_RELEASE} -LTCG")
endif(MSVC)


file(GLOB GLOB_BENCHMARK_COMMON ${BENCHMARK_ROOT}/*.cpp)
file(GLOB GLOB_BENCHMARK_TESTS ${BENCHMARK_ROOT}/tests/*.cpp)

add_executable(
	${TARGET_BENCHMARK}
	EXCLUDE_FROM_ALL
	${GLOB_BENCHMARK_COMMON}
	${GLOB_BENCHMARK_TESTS}
)

set_target_properties(
	${TARGET_BENCHMARK}
	PROPERTIES
	OUTPUT_NAME ${OUTNAME_BENCHMARK}
)

target_link_libraries(${TARGET_BENCHMARK} ${TARGET_LIB} ${LUA_LIB})
